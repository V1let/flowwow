# Обеспечение безопасности backend‑части

Дата: 20.02.2026  
Проект: Flowwow  
Результат: защищённый backend‑код и описание мер

## 1. Анализ уязвимостей

Потенциальные риски:
- отсутствие валидации на части входных DTO;
- возможная утечка служебной информации при необработанных исключениях;
- риски инъекций при некорректных запросах (минимизированы при использовании JPA).

## 2. Защита от SQL‑инъекций

Реализовано:
- Использование JPA/Repository с параметризованными запросами (без прямой подстановки строк).
- Запросы формируются через методы репозитория и `@Query` с параметрами.

## 3. Валидация входных данных

Добавлены аннотации в DTO:
- `AuthRequest` — обязательность email/пароля, формат email, длина пароля.
- `RegisterRequest` — обязательность имени/телефона/пароля, формат email, длины полей.
- `ReviewCreateRequest` — обязательность и диапазоны рейтинга, длина текста.
- `ProductCreateRequest` и `ProductUpdateRequest` — обязательные поля, длины строк, минимальная цена.
- `OrderCreateRequest` и `OrderItemRequest` — обязательные поля, длины, минимальные количества.
- `ProductImageRequest` — обязательность пути и длина.

Валидация вложенных элементов включена через `@Valid`.

## 4. Обработка ошибок

Добавлен глобальный обработчик исключений:
- `400` на ошибки валидации с перечнем полей;
- `409` на бизнес‑ошибки (например, конфликт состояния);
- `500` для непредвиденных ошибок без утечки служебной информации;
- логирование критичных ошибок на сервере.

## 5. Повторная проверка

Рекомендовано:
- проверить корректность валидации на API (некорректные входные данные);
- убедиться, что ответы не содержат стек‑трейсы;
- убедиться, что SQL‑запросы продолжают работать корректно.

## 6. Итог

Backend усилен за счёт валидации, безопасной обработки ошибок и использования параметризованных запросов через JPA.
